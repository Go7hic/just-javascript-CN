
# 心智模型(Mental Models)

阅读这段代码:

```
let a = 10;
let b = a;
a = 0;
```

运行后，`a`和`b`的值是多少？在进一步阅读之前，先在你的头脑中解决这个问题。


如果你已经写过一段时间的JavaScript，你可能会反对："这个片段比我每天写的代码简单多了。有什么意义呢？"


这个练习的目的并不是要向你介绍变量。我们假定你已经熟悉它们了。相反，它是为了让你注意并反思你的*心智模型*。


## 什么是心智模型？


再读一遍上面的代码，目的是*真正确定*结果是什么。(我们稍后会看到为什么这个意图很重要）。

当你第二次阅读时，密切注意你的头脑中正在发生的事情，一步一步地。你可能会注意到这样的一段独白：

* `let a = 10;`
	* 声明一个名为`a'的变量。将其设置为`10`。
* `let b = a;`
	* 宣告一个名为`b'的变量。把它设置为`a`。
  * 等等，`a`是什么来着？啊，是`10`。所以`b`也是`10`。
* `a = 0;`
	* 将`a`变量设为`0`。
* 所以`a`现在是`0`，`b`是`10`。这就是我们的答案。

也许你的独白有点不同。也许你说的是 "assign "而不是 "set"，或者你读的顺序略有不同。也许你得出了一个不同的结果。注意它到底有什么不同。注意即使是这样的独白也不能捕捉到你头脑中真正发生的事情。你可能会说 "把`b'设置为`a'"，但*设置*个变量到底是什么意思？


你可能会发现，对于每一个熟悉的基本编程概念（如变量）和对它的操作（如设置其值），都有一套根深蒂固的类比，你与它相关联。其中一些可能来自于现实世界。还有一些可能是你从其他领域先学来的，比如数学中的数字。这些类比可能会重叠，甚至相互矛盾，但它们仍然可以帮助你理解代码中所发生的事情。


例如，许多人最初了解到的变量是 "盒子"--用来装东西的容器。即使当你看到一个变量时，你不再生动地想象盒子，它们在你的想象中仍可能表现得 "盒子一样"。


这些在你脑海中对某一事物运作方式的近似描述被称为 "心智模型"。如果你长期从事编程工作，这可能会很难，但请试着注意并反省你的心智模型。它们可能是视觉、空间和机械心理捷径的组合。这些直觉（如变量的 "盒状"）影响了我们一生中阅读代码的方式。

不幸的是，有时我们的心智模型是错误的。也许我们早期读到的一个教程牺牲了准确性，以便使一个概念更容易解释。也许，当我们开始学习 JavaScript 时，我们错误地从以前学过的语言中 "拿来 "了一个预期行为。也许我们从一些代码中推断出一个心智模型，但从未真正验证过它是否准确。



识别和解决这些问题是*Just JavaScript*的目的所在。我们将逐步建立（或可能重建）你的JavaScript心智模型，使其准确而有用。一个好的心智模型会让你对自己的代码充满信心，也会让你理解（和修复）别人写的代码。



(顺便说一下，"a "是 "0"，"b "是 "10"，*是*正确的答案）。


## 编码，快与慢


"思考，快与慢 "是丹尼尔-卡尼曼的一本书，探讨了人类在思考时使用的两种不同 "系统"。


只要我们可以，我们就依靠 "快速 "系统，它擅长模式匹配和 "直觉反应"。我们与许多动物共享这个系统（这是生存所必需的！），它给了我们惊人的力量，如走路不倒的能力。但它并不擅长规划。

独特的是，由于额叶的发展，人类还拥有一个 "慢 "的思维系统。这个 "慢 "系统负责复杂的分步推理。它让我们计划未来的事件，参与争论，或遵循数学证明。


由于使用 "慢 "系统是如此耗费精神，我们倾向于默认使用 "快 "系统，即使是在处理像编码这样的智力任务时。


想象一下，你正处于大量的工作中，你想快速确定这个函数是做什么的。看一眼它：

```
function duplicateSpreadsheet(original) {
  if (original.hasPendingChanges) {
    throw new Error('You need to save the file before you can duplicate it.');
  }
  let copy = {
    created: Date.now(),
    author: original.author,
    cells: original.cells,
    metadata: original.metadata,
  };
  copy.metadata.title = 'Copy of ' + original.metadata.title;
  return copy;
}
```


你可能已经注意到了：

* 这个函数会复制一个电子表格。 
* 如果原始电子表格没有被保存，它会抛出一个错误。 
* 它会在新的电子表格的标题前加上 "复制的"。

你可能*没有*注意到（如果你注意到了，那就太好了！），这个函数*也*意外地改变了原始电子表格的标题。遗漏这样的bug是每个程序员每天都会遇到的事情。


现在你知道了一个bug的存在，你会以不同的方式阅读代码吗？如果你一开始使用的是 "快 "的思维系统，那么当你意识到代码中存在bug时，你可能会改用更费力的 "慢 "的系统。


当我们使用 "快 "系统时，我们根据代码的整体结构、命名规则和注释来猜测它的作用。使用 "慢 "系统时，我们要一步一步地回溯代码的作用--这是一个累人又耗时的过程。

这就是为什么拥有一个准确的心智模型是如此重要。在你的头脑中模拟一台计算机是很难的，当你不得不回到 "慢 "的思维系统时，你的心智模型是你唯一可以依赖的。有了错误的心智模型，你就会从根本上误解对你的代码的期望，而你所有的努力都将被浪费。

如果你根本找不到错误，也不要担心--这只意味着你将从本课程中获得最大的收获在接下来的模块中，我们将一起重建我们对JavaScript的心智模型，这样你就可以立即抓住这样的bug。

在下一个模块中，我们将开始为一些最基本的JavaScript概念--值和表达式建立心智模型。